var visitors=new function(){function e(e){if(null!==e&&"object"==typeof e){switch(e.Type){case"swiperight":e.Next="messages";break;default:return}e.Page="visitors",e.Command="Click"}else{var t=e,e={Type:"Click",UserNo:t,Page:"visitors",Command:"SaveId",Next:"actions"};if(o==t&&(e.Next="profile"),visitors.Classic){if(0!=t)return doModal("FrameDialog"),void classicSetDialog(e.Next,t);e={Command:"MakeId"}}}ToC(e)}function t(){Obj={Command:"",Next:"messages"},ToC(Obj)}function i(e,t,i,o){var s=makeElement(e,"li","section"),d=makeElement(s,"img","section");s.style.backgroundColor="#"+toHex6(t.PoolCol),s.style.color="#"+toHex6(t.PoolColW),d.height=20,d.width=20,d.src="svg/selGroups.svg";var n=makeElement(s,"span","section");addText(n,t.name),s.setAttribute("onClick",'visitors.SetPool("'+o+'")'),l+=s.offsetHeight,a=s}var o,a,l=this.PoolHeight=0,s=this.ScrollHeight=0,d=document.getElementById("visitorsContainer");this.main=function(e){a=void 0,xatMain(e),o=config.MyId,addTitleBar(["mob1.visitors","Visitors"],[["","‚ùÆ "],["mob1.messages","Messages"]],t,"",null),document.body.style.display="block",d.style.top=document.getElementById("titleBar").clientHeight,d.style.bottom=0,d.addEventListener("scroll",onScrollEventHandler,!1),doZap(10),AddHammer(document.body,Hammer.DIRECTION_RIGHT),LoadLang({mob1:0})},this.addVisitor=function(t,o){var l=JSON.parse(t),s=parseInt(l.id);if(0!=s){var d,n,r="",m="idvisitors",c=m+s,v=document.getElementById(m);if(v){if(s<400&&s>=300)return void i(v,l,1,s);var g=makeElement(0,"li","friend");iidLine++,g.setAttribute("data-line",iidLine),LineVisible=0,g.setAttribute("data-visible",LineVisible);var u=makeElement(g,"div","listTable"),p=makeElement(u,"div","dialogRow");makeElement(p,"div","dialogCell dialogCellMiddle EditCell","del"+s),this.Classic||(n=makeElement(p,"div","dialogCell dialogCellMiddle"));var C=makeElement(p,"div","dialogCell dialogWide noPointer"),f=makeElement(C,"div","");makeElement(C,"div",""),n&&LoadImage(n,l.image,"avatar",30,l),void 0!=(d=ProcessName(l.name,r,l.pFlags)).status&&(r=d.status);var h=makeElement(f,"p");h.className="visitorsName",l.F&&(h.style.fontWeight=600);var y=createSmText(l.pawn+d.name,"message","holder pawnholder");if(void 0!==d.glow&&(y.style["text-shadow"]=MakeGlow(d.glow)),void 0!==d.col&&(y.style.color="#"+toHex6(d.col)),h.appendChild(y),!this.Classic){var E=makeElement(f,"p");if(E.className="visitorsStatus",r){var b=document.createTextNode(r);void 0!==d.statusglow&&(E.style["text-shadow"]=MakeGlow(d.statusglow)),void 0!==d.statuscol&&(E.style.color="#"+toHex6(d.statuscol)),E.appendChild(b)}var w=createSmText(l.text);E.appendChild(w)}if(g.onclick=function(){e(s)},o>=0)if(removeById(c),0==o)a?insertAfter(g,a):(k=v.firstChild,k?v.insertBefore(g,k):v.appendChild(g));else{var x=m+o,T=document.getElementById(x);T?insertAfter(g,T):v.appendChild(g)}else v.appendChild(g);g.id=c}}},this.scrollMessages=function(){zapTimeout=setTimeout(doZap,10),window.scrollTo(0,s)},this.SetPool=function(e){var t={Type:"SetPool",Pool:e,Page:"visitors",Command:"SetPool"};ToC(t)}};